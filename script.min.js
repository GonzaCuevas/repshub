const headerdocument.getElementById'header'const mobileMenuToggledocument.getElementById'mobileMenuToggle'const navdocument.getElementById'nav'const navListdocument.querySelector'.navlist'const filterButtonsdocument.querySelectorAll'.filterbtn'function throttlefunclimitlet inThrottlereturn function...argsifinThrottlefunc.applythisargsinThrottletruesetTimeoutinThrottlefalselimitfunction debouncefuncwaitlet timeoutreturn function executedFunction...argsconst laterclearTimeouttimeoutfunc...argsclearTimeouttimeouttimeoutsetTimeoutlaterwaitlet lastScroll0let tickingfalselet rafIdnullfunction updateHeaderconst currentScrollwindow.pageYOffsetwindow.scrollYifcurrentScrolllastScrollcurrentScroll50ifheaderheader.style.transform'translate3d000'header.style.opacity'1'elseifheadercurrentScroll50header.style.transform'translate3d01000'header.style.opacity'0'ifcurrentScroll50header.classList.add'scrolled'elseheader.classList.remove'scrolled'ifwindow.innerWidth767headerisMenuOpenconst headerHeightheader.offsetHeightdocument.documentElement.style.setProperty'headerheight'`$headerHeightpx`lastScrollcurrentScrolltickingfalserafIdnullfunction handleScrolliftickingrafIdrequestAnimationFrameupdateHeadertickingtruewindow.addEventListener'scroll'handleScrollpassivetruewindow.addEventListener'beforeunload'ifrafIdcancelAnimationFramerafIdwindow.removeEventListener'scroll'handleScrollifmobileMenuTogglelet isMenuOpenfalsefunction updateMobileMenuPositionifwindow.innerWidth767headernavListconst headerRectheader.getBoundingClientRectconst headerHeightheaderRect.heightconst headerTopheaderRect.topdocument.documentElement.style.setProperty'headerheight'`$headerHeightpx`ifisMenuOpennavList.classList.contains'active'const menuTopheaderTopheaderHeightnavList.style.top`$menuToppx`navList.style.height`calc100vh$menuToppx`ifdocument.readyState'loading'document.addEventListener'DOMContentLoaded'updateMobileMenuPositionelseupdateMobileMenuPositionwindow.addEventListener'resize'throttleupdateMobileMenuPosition100const handleMenuScrollthrottleifwindow.innerWidth767isMenuOpennavList.classList.contains'active'requestAnimationFrameupdateMobileMenuPosition100window.addEventListener'scroll'handleMenuScrollpassivetruemobileMenuToggle.addEventListener'click'updateMobileMenuPositionconst wasOpennavList.classList.contains'active'navList.classList.toggle'active'mobileMenuToggle.classList.toggle'active'isMenuOpenwasOpenifisMenuOpendocument.body.style.overflow'hidden'setTimeoutupdateMobileMenuPosition10elsedocument.body.style.overflow''const spansmobileMenuToggle.querySelectorAll'span'ifnavList.classList.contains'active'spans0.style.transform'rotate45degtranslate5px5px'spans1.style.opacity'0'spans2.style.transform'rotate45degtranslate7px6px'elsespans0.style.transform'none'spans1.style.opacity'1'spans2.style.transform'none'document.addEventListener'click'eifwindow.innerWidth767isMenuOpennavList.classList.contains'active'const isClickInsideMenunavList.containse.targetconst isClickOnTogglemobileMenuToggle.containse.targetifisClickInsideMenuisClickOnTogglenavList.classList.remove'active'mobileMenuToggle.classList.remove'active'isMenuOpenfalsedocument.body.style.overflow''const spansmobileMenuToggle.querySelectorAll'span'spans0.style.transform'none'spans1.style.opacity'1'spans2.style.transform'none'const navLinksdocument.querySelectorAll'.navlink'navLinks.forEachlinklink.addEventListener'click'navList.classList.remove'active'mobileMenuToggle.classList.remove'active'isMenuOpenfalsedocument.body.style.overflow''const spansmobileMenuToggle.querySelectorAll'span'spans0.style.transform'none'spans1.style.opacity'1'spans2.style.transform'none'document.addEventListener'click'eifnav.containse.targetnavList.classList.contains'active'navList.classList.remove'active'mobileMenuToggle.classList.remove'active'const spansmobileMenuToggle.querySelectorAll'span'spans0.style.transform'none'spans1.style.opacity'1'spans2.style.transform'none'document.querySelectorAll'ahref^"#"'.forEachanchoranchor.addEventListener'click'functioneconst hrefthis.getAttribute'href'ifhref'#'this.hasAttribute'dataagentlink'returnconst targetdocument.querySelectorhrefiftargete.preventDefaultconst headerOffset80const elementPositiontarget.getBoundingClientRect.topconst offsetPositionelementPositionwindow.pageYOffsetheaderOffsetwindow.scrollTotopoffsetPositionbehavior'smooth'const observerOptionsthreshold0.1rootMargin'0px 0px50px 0px'const observernew IntersectionObserverentriesentries.forEachentryifentry.isIntersectingentry.target.classList.add'visible'observer.unobserveentry.targetobserverOptionsfunction initScrollAnimationsconst slideUpElementsdocument.querySelectorAll'.slideupnot.observed'slideUpElements.forEachelobserver.observeelel.classList.add'observed'document.addEventListener'DOMContentLoaded'initScrollAnimationsiffilterButtons.length0filterButtons.forEachbuttonbutton.addEventListener'click'filterButtons.forEachbtnbtn.classList.remove'active'button.classList.add'active'button.style.transform'scale0.95'setTimeoutbutton.style.transform'scale1'150document.addEventListener'DOMContentLoaded'const categoryButtonsdocument.querySelectorAll'.categorybtn'ifcategoryButtons.length0categoryButtons.forEachbuttonifbutton.dataset.listenerAddedbutton.dataset.listenerAdded'true'button.addEventListener'click'categoryButtons.forEachbtnbtn.classList.remove'active'button.classList.add'active'setTimeoutconst filtersbuildFiltersFromUIloadProductsPage1filters10const searchInputdocument.getElementById'productSearch'ifsearchInputconst handleSearchdebounceeconst searchTerme.target.value.trimconst filtersbuildFiltersFromUIifsearchTermfilters.searchsearchTermloadProductsPage1filters400searchInput.addEventListener'input'handleSearchpassivetrueconst sortSelectdocument.getElementById'sortSelect'ifsortSelectsortSelect.addEventListener'change'functionconst selectedValuethis.valueconst filtersbuildFiltersFromUIfilters.sortselectedValuecurrentPage1loadProductsPage1filtersconst filterSectionHeadersdocument.querySelectorAll'.filtersectionheader'filterSectionHeaders.forEachheaderheader.addEventListener'click'const sectionheader.getAttribute'datasection'const contentdocument.getElementById`$sectionContent`const isExpandedheader.getAttribute'ariaexpanded''true'filterSectionHeaders.forEachhifhheaderh.setAttribute'ariaexpanded''false'const otherSectionh.getAttribute'datasection'const otherContentdocument.getElementById`$otherSectionContent`ifotherContentotherContent.classList.remove'expanded'header.setAttribute'ariaexpanded'isExpandedifcontentcontent.classList.toggle'expanded'isExpandedheader.setAttribute'ariaexpanded''false'const sectionheader.getAttribute'datasection'const contentdocument.getElementById`$sectionContent`ifcontentcontent.classList.remove'expanded'const qualityButtonsdocument.querySelectorAll'.qualitybtn'qualityButtons.forEachbuttonbutton.addEventListener'click'qualityButtons.forEachbtnbtn.classList.remove'active'button.classList.add'active'const filtersbuildFiltersFromUIconst qualitybutton.getAttribute'dataquality'ifqualityfilters.qualityqualityloadProductsPage1filtersconst brandButtonsdocument.querySelectorAll'.brandbtn'brandButtons.forEachbuttonbutton.addEventListener'click'brandButtons.forEachbtnifbtnbuttonbtn.classList.remove'active'button.classList.toggle'active'const filtersbuildFiltersFromUIloadProductsPage1filtersfunction buildFiltersFromUIconst filtersconst searchInputdocument.getElementById'productSearch'ifsearchInputsearchInput.value.trimfilters.searchsearchInput.value.trimconst activeCategorydocument.querySelector'.categorybtn.active'ifactiveCategoryconst categoryactiveCategory.getAttribute'datacategory'ifcategorycategory'all'filters.categorycategoryconst activeQualitydocument.querySelector'.qualitybtn.active'ifactiveQualityconst qualityactiveQuality.getAttribute'dataquality'ifqualityfilters.qualityqualityconst activeBranddocument.querySelector'.brandbtn.active'ifactiveBrandconst brandValueactiveBrand.getAttribute'databrand'activeBrand.textContent.trimfilters.brandbrandValueconst sortSelectdocument.getElementById'sortSelect'ifsortSelectfilters.sortsortSelect.valuereturn filtersconst productCardsdocument.querySelectorAll'.productcard'productCards.forEachcardcard.addEventListener'mouseenter'functionthis.style.transition'all 0.3s easeinout'card.addEventListener'mouseleave'functionthis.style.transition'all 0.3s easeinout'const buttonsdocument.querySelectorAll'.btn'buttons.forEachbuttonbutton.addEventListener'mouseenter'functionthis.style.transition'all 0.3s easeinout'button.addEventListener'mouseleave'functionthis.style.transition'all 0.3s easeinout'function setActiveNavLinkconst currentPathwindow.location.pathnameconst navLinksdocument.querySelectorAll'.navlink'navLinks.forEachlinklink.classList.remove'active'const linkPathlink.getAttribute'href'ifcurrentPath.includeslinkPathcurrentPath''linkPath'index.html'currentPath.endsWith''linkPath'index.html'link.classList.add'active'document.addEventListener'DOMContentLoaded'setActiveNavLinkconst configToggledocument.getElementById'configToggle'const configPaneldocument.getElementById'configPanel'const configClosedocument.getElementById'configClose'const currencyOptionsdocument.querySelectorAll'#currencyOptions .configoption'const agentOptionsdocument.querySelectorAll'#agentOptions .configoption'ifconfigToggleconfigPanelconfigToggle.addEventListener'click'ee.stopPropagationconst buttonRectconfigToggle.getBoundingClientRectconst panelContentconfigPanel.querySelector'.configpanelcontent'ifpanelContentconst panelWidth360const spacing8const leftPositionbuttonRect.rightpanelWidthspacingconst topPositionbuttonRect.bottomspacingpanelContent.style.position'absolute'panelContent.style.top`$topPositionpx`panelContent.style.right'auto'panelContent.style.left`$Math.maxspacingleftPositionpx`panelContent.style.transform'none'configPanel.classList.add'active'document.body.style.overflow'hidden'const updatePanelPositionthrottleifconfigPanel.classList.contains'active'configToggleconst buttonRectconfigToggle.getBoundingClientRectconst panelContentconfigPanel.querySelector'.configpanelcontent'ifpanelContentconst panelWidth360const spacing8const leftPositionbuttonRect.rightpanelWidthspacingconst topPositionbuttonRect.bottomspacingpanelContent.style.left`$Math.maxspacingleftPositionpx`panelContent.style.top`$topPositionpx`100window.addEventListener'resize'updatePanelPositionpassivetrueifconfigCloseconfigPanelconfigClose.addEventListener'click'configPanel.classList.remove'active'document.body.style.overflow''ifconfigPanelconfigPanel.addEventListener'click'eife.targetconfigPanelconfigPanel.classList.remove'active'document.body.style.overflow''currencyOptions.forEachoptionoption.addEventListener'click'currencyOptions.forEachoptopt.classList.remove'active'option.classList.add'active'const selectedCurrencyoption.getAttribute'datacurrency'localStorage.setItem'selectedCurrency'selectedCurrencyupdateProductPricesselectedCurrencyagentOptions.forEachoptionoption.addEventListener'click'agentOptions.forEachoptopt.classList.remove'active'option.classList.add'active'const selectedAgentoption.getAttribute'dataagent'localStorage.setItem'selectedAgent'selectedAgentupdateProductLinksselectedAgentconst themeToggledocument.getElementById'themeToggle'ifthemeTogglethemeToggle.addEventListener'click'const currentThemedocument.documentElement.getAttribute'datatheme''dark'const newThemecurrentTheme'dark''light''dark'applyThemenewThemefunction applyThemethemeiftheme'dark'document.documentElement.setAttribute'datatheme''dark'elsedocument.documentElement.setAttribute'datatheme''light'localStorage.setItem'selectedTheme'themefunctionconst savedThemelocalStorage.getItem'selectedTheme''dark'document.documentElement.setAttribute'datatheme'savedThemefunction getAgentDisplayNameagentCodeconst agentOptiondocument.querySelector`.agentoptiondataagent"$agentCode"`ifagentOptionconst agentNameSpanagentOption.querySelector'.agentname'ifagentNameSpanreturn agentNameSpan.textContent.trimconst agentNames'Hubbuy''Hubbuy''KakoBuy''KakoBuy''Kakobuy''KakoBuy''MuleBuy''MuleBuy''Mulebuy''MuleBuy''CssBuy''CssBuy''CSSBuy''CssBuy''cssbuy''CssBuy''Oopbuy''Oopbuy''OOPBuy''Oopbuy''oopbuy''Oopbuy'return agentNamesagentCodeagentCodefunction extractBaseUrlFromAgentLinkagentLinkifagentLinktypeof agentLink'string'return nullconst urlagentLink.trimifurl.includes'weidian.com'url.includes'1688.com'url.includes'taobao.com'return urlifurl.includes'kakobuy.comitemdetails'const urlMatchurl.matchurl^ifurlMatchurlMatch1trylet decodedUrldecodeURIComponenturlMatch1ifdecodedUrl.includes''decodedUrldecodeURIComponentdecodedUrlifdecodedUrl.includes'weidian.com'decodedUrl.includes'1688.com'decodedUrl.includes'taobao.com'return decodedUrlcatcheifurl.includes'hubbuycn.com'url.includes'hipobuy'const matchurl.matchurl^ifmatchlet baseUrlmatch1ifbaseUrl.includes'product_link'baseUrlbaseUrl.replace'product_link'''tryreturn decodeURIComponentbaseUrlcatchereturn baseUrlconst oopbuyMatchurl.matchoopbuy\.com\product\^\\\difoopbuyMatchconst platformoopbuyMatch1const productIdoopbuyMatch2ifplatform'weidian'platform'WEIDIAN'return `httpselse ifplatform'1688'return `httpselse ifplatform'taobao'return `httpsconst mulebuyMatchurl.matchmulebuy\.com\product\id\dplatform^ifmulebuyMatchconst productIdmulebuyMatch1const platformmulebuyMatch2ifplatform'WEIDIAN'return `httpselse ifplatform'ALI_1688'return `httpselse ifplatform'TAOBAO'return `httpsconst cssbuyMatchurl.matchcssbuy\.com\item\d\.htmliifcssbuyMatchconst productIdcssbuyMatch1return nullreturn nullfunction updateProductLinksselectedAgentifselectedAgentselectedAgentlocalStorage.getItem'selectedAgent'document.querySelector'.agentoption.active'.getAttribute'dataagent''Hubbuy'const agentDisplayNamegetAgentDisplayNameselectedAgentconst productLinksdocument.querySelectorAll'adataagentlink'productLinks.forEachlinkconst cardlink.closest'.productcard'ifcardlink.textContent`Ver en $agentDisplayName`link.href'javascriptvoid0'link.style.opacity'0.5'link.style.cursor'notallowed'returnlet baseUrlcard.getAttribute'databaseurl'ifbaseUrlbaseUrl.trim''ifbaseUrl.includes'kakobuy.com'baseUrl.includes'hubbuycn.com'baseUrl.includes'mulebuy.com'baseUrl.includes'cssbuy.com'baseUrl.includes'oopbuy.com'const realBaseUrlextractBaseUrlFromAgentLinkbaseUrlifrealBaseUrlrealBaseUrl.includes'weidian.com'realBaseUrl.includes'1688.com'realBaseUrl.includes'taobao.com'baseUrlrealBaseUrlelsebaseUrlnullelse ifbaseUrl.includes'weidian.com'baseUrl.includes'1688.com'baseUrl.includes'taobao.com'baseUrlnullelsebaseUrlnullifbaseUrlbaseUrl.trim''asyncconst convertedLinkawait convertToAgentLinkbaseUrlselectedAgentifconvertedLinkconvertedLink.trim''convertedLink.startsWith'http'link.hrefconvertedLinklink.textContent`Ver en $agentDisplayName`link.style.opacity''link.style.cursor''elselink.href'javascriptvoid0'link.textContent`Sin link disponible`link.style.opacity'0.5'link.style.cursor'notallowed'elselink.href'javascriptvoid0'link.textContent`Sin link disponible`link.style.opacity'0.5'link.style.cursor'notallowed'function openQCModalproductconst qcModaldocument.getElementById'qcModal'const qcModalBodydocument.getElementById'qcModalBody'ifqcModalqcModalBodyreturnconst mainImageproduct.imagen_urlproduct.imagen''const qcImagesproduct.qc_imagesconst imagesqcImages.length0qcImagesmainImage.filterBooleanlet modalHTML''ifimages.length0modalHTML`div class"qcnoimages"div class"qcnoimagesicon"游닝divpNo hay im치genes QC disponibles para este productopdiv`elsemodalHTML`div class"qcmainimagecontainer"img src"$images0" alt"$escapeHtmlproduct.nombre'Producto'" class"qcmainimage" id"qcMainImage" loading"lazy" decoding"async"div$images.length1`div class"qcgallery" id"qcGallery"$images.mapimgindex`div class"qcgalleryitem $index0'active'''" dataimageindex"$index"img src"$img" alt"QC $index1" loading"lazy"div`.join''div`''div class"qcproductinfo"h3 class"qcproductname"$escapeHtmlproduct.nombre'Producto'h3div class"qcproductmeta"$product.categoria`div class"qcmetaitem"span class"qcmetalabel"Categor칤aspanspan class"qcmetavalue"$escapeHtmlproduct.categoriaspandiv`''$product.calidad`div class"qcmetaitem"span class"qcmetalabel"Calidadspanspan class"qcmetavalue"$escapeHtmlproduct.calidadspandiv`''$product.precio_cny`div class"qcmetaitem"span class"qcmetalabel"Preciospanspan class"qcmetavalue"$formatPriceproduct.precio_cnyCNYspandiv`''divdiv`qcModalBody.innerHTMLmodalHTMLifimages.length1const galleryItemsqcModalBody.querySelectorAll'.qcgalleryitem'const mainImageEldocument.getElementById'qcMainImage'galleryItems.forEachitemindexitem.addEventListener'click'galleryItems.forEachii.classList.remove'active'item.classList.add'active'ifmainImageElmainImageEl.srcimagesindexqcModal.classList.add'active'document.body.style.overflow'hidden'function closeQCModalconst qcModaldocument.getElementById'qcModal'ifqcModalqcModal.classList.remove'active'document.body.style.overflow''function initQCModalconst qcModaldocument.getElementById'qcModal'const qcModalClosedocument.getElementById'qcModalClose'const qcModalBackdropqcModal.querySelector'.qcmodalbackdrop'ifqcModalreturnifqcModalCloseqcModalClose.addEventListener'click'closeQCModalifqcModalBackdropqcModalBackdrop.addEventListener'click'closeQCModaldocument.addEventListener'keydown'eife.key'Escape'qcModal.classList.contains'active'closeQCModalconst observernew MutationObserverattachQCListenersconst productsGriddocument.querySelector'.productsgrid'ifproductsGridobserver.observeproductsGridchildListtruesubtreetrueattachQCListenersfunction attachQCListenersconst productImagesdocument.querySelectorAll'.productcard .productimage'productImages.forEachimageContainerifimageContainer.dataset.qcListener'true'returnimageContainer.dataset.qcListener'true'imageContainer.addEventListener'click'ee.preventDefaulte.stopPropagationconst cardimageContainer.closest'.productcard'ifcardreturnconst productNamecard.querySelector'.productname'.textContent''const productCategorycard.querySelector'.productmeta'.textContent''const productPricecard.querySelector'.pricecny'.getAttribute'datapricecny'''const productImagecard.querySelector'.productimage img'.src''const productQualitycard.querySelector'.productquality'.textContent''const productnombreproductNamecategoriaproductCategoryprecio_cnyparseFloatproductPrice0imagen_urlproductImagecalidadproductQualityqc_imagesconst allImagescard.querySelectorAll'.productimage img'ifallImages.length1product.qc_imagesArray.fromallImages.mapimgimg.srcopenQCModalproductifdocument.readyState'loading'document.addEventListener'DOMContentLoaded'initQCModalelseinitQCModalasync function loadDatabaseStatsconst totalProductsEldocument.getElementById'totalProducts'const totalCategoriesEldocument.getElementById'totalCategories'const totalQualityEldocument.getElementById'totalQuality'const lastUpdateEldocument.getElementById'lastUpdate'iftotalProductsElreturntryconst headers"apikey"SUPABASE_ANON_KEY"Authorization"`Bearer $SUPABASE_ANON_KEY`"ContentType""applicationjson"const query`$SUPABASE_REST_URLproducts_cleanselectidcategoriacalidadcreated_atactivoeq.true`const controllernew AbortControllerconst timeoutIdsetTimeoutcontroller.abort10000const resawait secureSupabaseFetchqueryheadersheaderssignalcontroller.signalclearTimeouttimeoutIdifres.okthrow new Error`Error $res.status`const productsawait res.jsonconst totalProductsproducts.lengthconst categoriesnew Setproducts.forEachpifp.categoriacategories.addp.categoriaconst totalCategoriescategories.sizeconst quality1to1products.filterpp.calidadp.calidad.toLowerCase.includes'11'.lengthlet lastUpdate'NA'ifproducts.length0const sortedProductsproducts .filterpp.created_at.sortabnew Dateb.created_atnew Datea.created_atifsortedProducts.length0const lastDatenew DatesortedProducts0.created_atconst nownew Dateconst diffDaysMath.floornowlastDate1000606024ifdiffDays0lastUpdate'Hoy'else ifdiffDays1lastUpdate'Ayer'else ifdiffDays7lastUpdate`Hace $diffDaysd칤as`elselastUpdatelastDate.toLocaleDateString'esAR'day'numeric'month'short'animateValuetotalProductsEl0totalProducts1000animateValuetotalCategoriesEl0totalCategories1000animateValuetotalQualityEl0quality1to11000iflastUpdateEllastUpdateEl.textContentlastUpdatecatcherrorconsole.error'Error loading database stats'erroriftotalProductsEltotalProductsEl.textContent'1500'iftotalCategoriesEltotalCategoriesEl.textContent'6'iftotalQualityEltotalQualityEl.textContent'500'iflastUpdateEllastUpdateEl.textContent'Reciente'function animateValueelementstartenddurationifelementreturnconst rangeendstartconst incrementrangeduration16let currentstartconst timersetIntervalcurrentincrementifincrement0currentendincrement0currentendcurrentendclearIntervaltimerconst formattedMath.floorcurrent.toLocaleString'esAR'element.textContentformatted16ifdocument.readyState'loading'document.addEventListener'DOMContentLoaded'ifwindow.location.pathname.includes'productos.html'loadDatabaseStatselseifwindow.location.pathname.includes'productos.html'loadDatabaseStatslet exchangeRatesCNY1.0USD0.155ARS225.525CLP144.15async function fetchExchangeRatestrytryconst responseawait fetch'httpsifresponse.okconst dataawait response.jsonconst oficialdata.finditemitem.casa.nombre'Dolar Oficial'ifoficialoficial.casa.ventaconst ventaOficialparseFloatoficial.casa.venta.replace'''.'ifisNaNventaOficialexchangeRates.ARSventaOficialreturncatcheexchangeRates.ARS1455catcheexchangeRates.ARS1455function updateProductPricesselectedCurrencyconst priceElementsdocument.querySelectorAll'.pricecnydatapricecny'let formatPriceFnswitchselectedCurrencycase 'CNY'formatPriceFnpriceCNY`춴$priceCNY.toFixed2CNY`breakcase 'USD'formatPriceFnpriceCNYconst convertedPricepriceCNYexchangeRates.USDreturn `$$convertedPrice.toFixed2USD`breakcase 'ARS'formatPriceFnpriceCNYconst convertedPricepriceCNYexchangeRates.ARSreturn `$$Math.roundconvertedPrice.toLocaleString'esAR'ARS`breakcase 'CLP'formatPriceFnpriceCNYconst convertedPricepriceCNYexchangeRates.CLPreturn `$$Math.roundconvertedPrice.toLocaleString'esCL'CLP`breakdefaultformatPriceFnpriceCNY`춴$priceCNY.toFixed2CNY`ifpriceElements.length20let index0const updateBatchconst batchSize10const endMath.minindexbatchSizepriceElements.lengthforlet iindexiendiconst priceElpriceElementsiconst originalPriceTextpriceEl.getAttribute'datapricecny'iforiginalPriceTextcontinueconst priceCNYparseFloatoriginalPriceTextifisNaNpriceCNYcontinueconst formattedPriceformatPriceFnpriceCNYpriceEl.textContent`Desde $formattedPrice`indexendifindexpriceElements.lengthrequestAnimationFrameupdateBatchrequestAnimationFrameupdateBatchelsepriceElements.forEachpriceElconst originalPriceTextpriceEl.getAttribute'datapricecny'iforiginalPriceTextreturnconst priceCNYparseFloatoriginalPriceTextifisNaNpriceCNYreturnconst formattedPriceformatPriceFnpriceCNYpriceEl.textContent`Desde $formattedPrice`document.addEventListener'DOMContentLoaded'asyncawait fetchExchangeRatesconst savedThemelocalStorage.getItem'selectedTheme''dark'const currentThemedocument.documentElement.getAttribute'datatheme'ifcurrentThemesavedThemeapplyThemesavedThemeconst savedCurrencylocalStorage.getItem'selectedCurrency'const savedAgentlocalStorage.getItem'selectedAgent'ifsavedCurrencycurrencyOptions.forEachoptionifoption.getAttribute'datacurrency'savedCurrencycurrencyOptions.forEachoptopt.classList.remove'active'option.classList.add'active'updateProductPricessavedCurrencyelseconst defaultCurrency'CNY'updateProductPricesdefaultCurrencyifsavedAgentagentOptions.forEachoptionifoption.getAttribute'dataagent'savedAgentagentOptions.forEachoptopt.classList.remove'active'option.classList.add'active'updateProductLinkssavedAgentelseconst defaultAgent'Hubbuy'ifdocument.querySelectorAll'adataagentlink'.length0updateProductLinksdefaultAgentdocument.addEventListener"DOMContentLoaded"const compraInputdocument.getElementById"compraUSD"const envioInputdocument.getElementById"envioUSD"const impuestosUSDdocument.getElementById"impuestosUSD"const impuestosARSdocument.getElementById"impuestosARS"const limpiarBtndocument.getElementById"limpiarCalc"const toggleFranquiciadocument.getElementById"toggleFranquicia"const toggleTasaGestiondocument.getElementById"toggleTasaGestion"const calculationSummarydocument.getElementById"calculationSummary"const franquiciaStatusdocument.getElementById"franquiciaStatus"const configAccordionToggledocument.getElementById"configAccordionToggle"const configCarddocument.getElementById"configCard"ifcompraInputenvioInputimpuestosUSDimpuestosARSlimpiarBtnreturnconst dolarOficialDisplaydocument.getElementById"dolarOficial"const contadoLiquiDisplaydocument.getElementById"contadoLiqui"let DOLAR_OFICIAL1455let CONTADO_LIQUI1513.90const FRANQUICIA50const TASA_GESTION4.95async function fetchExchangeRatestrytryconst responseawait fetch'httpsifresponse.okconst dataawait response.jsonconst oficialdata.finditemitem.casa.nombre'Dolar Oficial'const ccldata.finditemitem.casa.nombre'Contado con Liquidacion'item.casa.nombre'Dolar Contado con Liquidacion'ifoficialoficial.casa.ventaconst ventaOficialparseFloatoficial.casa.venta.replace'''.'ifisNaNventaOficialDOLAR_OFICIALventaOficialifdolarOficialDisplaydolarOficialDisplay.textContent`$$DOLAR_OFICIAL.toFixed2`ifcclccl.casa.ventaconst ventaCCLparseFloatccl.casa.venta.replace'''.'ifisNaNventaCCLCONTADO_LIQUIventaCCLifcontadoLiquiDisplaycontadoLiquiDisplay.textContent`$$CONTADO_LIQUI.toFixed2`catchecalcularcatcherrorif'requestIdleCallback' in windowrequestIdleCallbackfetchExchangeRatestimeout2000elsesetTimeoutfetchExchangeRates100setIntervalif'requestIdleCallback' in windowrequestIdleCallbackfetchExchangeRateselsefetchExchangeRates30601000function animateNumberelementelement.classList.add"animate"setTimeoutelement.classList.remove"animate"400function updateFranquiciaStatususarFranquiciaiffranquiciaStatusreturnifusarFranquiciafranquiciaStatus.textContent"Franquicia aplicada$50"elsefranquiciaStatus.textContent"Franquicia no aplicada"function updateSummaryusarTasaGestionifcalculationSummaryreturnlet summary"Estimaci칩n50de la base imponible"ifusarTasaGestionsummary"tasa fija$4.95 USD"calculationSummary.textContentsummaryfunction calcularconst compraparseFloatcompraInput.value0const envioparseFloatenvioInput.value0const totalUSDcompraenvioconst usarFranquiciatoggleFranquiciatoggleFranquicia.checkedtrueconst usarTasaGestiontoggleTasaGestiontoggleTasaGestion.checkedtruelet baseImponibleifusarFranquiciabaseImponibleMath.max0totalUSDFRANQUICIAelsebaseImponibletotalUSDlet impuestosbaseImponible0.5ifusarTasaGestionimpuestosTASA_GESTIONconst prevUSDimpuestosUSD.textContentconst prevARSimpuestosARS.textContentimpuestosUSD.textContent`$$impuestos.toFixed2`const impuestosARSValueimpuestosDOLAR_OFICIALimpuestosARS.textContent`$$impuestosARSValue.toLocaleString"esAR"minimumFractionDigits2maximumFractionDigits2useGroupingtrue`const dolarOficialNotedocument.getElementById"dolarOficialNote"ifdolarOficialNotedolarOficialNote.textContent`D칩lar Oficial$$DOLAR_OFICIAL.toFixed2`ifprevUSDimpuestosUSD.textContentanimateNumberimpuestosUSDifprevARSimpuestosARS.textContentanimateNumberimpuestosARSupdateFranquiciaStatususarFranquiciaupdateSummaryusarTasaGestioncompraInput.addEventListener"input"calcularenvioInput.addEventListener"input"calculariftoggleFranquiciatoggleFranquicia.addEventListener"change"calculariftoggleTasaGestiontoggleTasaGestion.addEventListener"change"calcularlimpiarBtn.addEventListener"click"compraInput.value""envioInput.value""impuestosUSD.textContent"$0.00"impuestosARS.textContent"$0.00"ifcalculationSummarycalculationSummary.textContent"Estimaci칩n50de la base imponibletasa fijasi aplica"iffranquiciaStatusconst usarFranquiciatoggleFranquiciatoggleFranquicia.checkedtrueupdateFranquiciaStatususarFranquiciaanimateNumberimpuestosUSDanimateNumberimpuestosARScalculardocument.addEventListener'DOMContentLoaded'const registerModaldocument.getElementById'registerModal'const registerModalClosedocument.getElementById'registerModalClose'const registerModalBackdropregisterModal.querySelector'.registermodalbackdrop'const isHomePagewindow.location.pathname.endsWith'index.html'window.location.pathname.endsWith''window.location.pathname''window.location.pathname.includes'.html'ifregisterModalisHomePagereturnconst showModalconst showregisterModal.classList.add'active'ifwindow.innerWidth640document.body.style.overflow'hidden'if'requestIdleCallback' in windowrequestIdleCallbackshowtimeout3000elsesetTimeoutrequestAnimationFrameshow3000ifdocument.readyState'complete'setTimeoutshowModal2000elsewindow.addEventListener'load'setTimeoutshowModal2000oncetrueconst closeModalregisterModal.classList.remove'active'document.body.style.overflow''ifregisterModalCloseregisterModalClose.addEventListener'click'closeModalifregisterModalBackdropregisterModalBackdrop.addEventListener'click'closeModaldocument.addEventListener'keydown'eife.key'Escape'registerModal.classList.contains'active'closeModaldocument.addEventListener'DOMContentLoaded'const wheelWidgetdocument.getElementById'wheelWidget'const wheelToggleBtndocument.getElementById'wheelToggleBtn'const wheelPopupdocument.getElementById'wheelPopup'const wheelPopupClosedocument.getElementById'wheelPopupClose'const wheelSpinCenterdocument.getElementById'wheelSpinCenter'const wheelMaindocument.getElementById'wheelMain'const prizeModaldocument.getElementById'prizeModal'const prizeCloseBtndocument.getElementById'prizeCloseBtn'const prizeTextdocument.getElementById'prizeText'const isHomePagewindow.location.pathname.endsWith'index.html'window.location.pathname.endsWith''window.location.pathname''window.location.pathname.includes'.html'ifwheelWidgetisHomePagereturnlet isSpinningfalselet isPopupOpenfalseconst lastSpinDatelocalStorage.getItem'lastWheelSpin'const todaynew Date.toDateStringconst hasSpunTodaylastSpinDatetodayifhasSpunTodaywheelToggleBtnconst toggleTextwheelToggleBtn.querySelector'.wheeltoggletext'iftoggleTexttoggleText.textContent'Ya jugaste hoy'wheelToggleBtn.style.opacity'0.7'const togglePopupifhasSpunTodayisPopupOpenreturnisPopupOpenisPopupOpenifwheelPopupwheelPopup.classList.toggle'active'isPopupOpenifwheelToggleBtnwheelToggleBtn.addEventListener'click'togglePopupconst closePopupisPopupOpenfalseifwheelPopupwheelPopup.classList.remove'active'ifwheelPopupClosewheelPopupClose.addEventListener'click'ee.stopPropagationclosePopupconst closePrizeModalifprizeModalprizeModal.classList.remove'active'ifprizeCloseBtnprizeCloseBtn.addEventListener'click'closePrizeModalifprizeModalprizeModal.querySelector'.prizemodalbackdrop'.addEventListener'click'closePrizeModalconst spinWheelifisSpinninghasSpunTodayreturnisSpinningtrueifwheelSpinCenterwheelSpinCenter.disabledtrueifwheelMainwheelMain.classList.add'spinning'wheelMain.style.willChange'transform'wheelMain.style.transform'translateZ0'const targetAngle0const spins5const finalAnglespins360360targetAnglerequestAnimationFrameifwheelMainwheelMain.style.transform`translateZ0rotate$finalAngledeg`setTimeoutisSpinningfalseifwheelMainwheelMain.classList.remove'spinning'wheelMain.style.willChange'auto'localStorage.setItem'lastWheelSpin'todayifprizeTextprizeText.textContent'Env칤o Gratis'closePopupsetTimeoutifprizeModalprizeModal.classList.add'active'ifwheelToggleBtnconst toggleTextwheelToggleBtn.querySelector'.wheeltoggletext'iftoggleTexttoggleText.textContent'Ya jugaste hoy'wheelToggleBtn.style.opacity'0.7'3003000ifwheelSpinCenterwheelSpinCenter.addEventListener'click'spinWheeldocument.addEventListener'keydown'eife.key'Escape'ifisPopupOpenclosePopupifprizeModalprizeModal.classList.contains'active'closePrizeModaldocument.addEventListener'DOMContentLoaded'const stepHeadersdocument.querySelectorAll'.stepheader'stepHeaders.forEachheaderheader.addEventListener'click'const stepNumberheader.getAttribute'datastep'const contentdocument.getElementById`stepcontent$stepNumber`ifcontentreturnconst isActiveheader.classList.contains'active'ifisActiveheader.classList.remove'active'content.classList.remove'expanded'elseheader.classList.add'active'content.classList.add'expanded'const firstStepdocument.querySelector'.stepheaderdatastep"1"'iffirstStepconst firstContentdocument.getElementById'stepcontent1'iffirstContentfirstStep.classList.add'active'firstContent.classList.add'expanded'const AUTHORIZED_DOMAINS'repshub.vercel.app''www.repshub.vercel.app''repshub1.vercel.app''www.repshub1.vercel.app''fashionreps.vercel.app''www.fashionreps.vercel.app''localhost''127.0.0.1'let sessionTokennulllet sessionExpiresAtnullfunction isAuthorizedDomainconst currentDomainwindow.location.hostnameconst currentOriginwindow.location.originreturn AUTHORIZED_DOMAINS.someauthorizedreturn currentDomainauthorizedcurrentDomain.includesauthorizedcurrentOrigin.includesauthorizedasync function validateDomaintryconst currentDomainwindow.location.hostnameconst currentOriginwindow.location.originconst responseawait fetch'apivalidatedomain'method'POST'headers'ContentType''applicationjson'bodyJSON.stringifydomaincurrentDomainorigincurrentOriginconst dataawait response.jsonifdata.okdata.authorizedsessionTokendata.sessionTokensessionExpiresAtdata.expiresAtreturn truereturn falsecatcherrorreturn falsefunction isSessionValidifsessionTokensessionExpiresAtreturn falsereturn Date.nowsessionExpiresAtasync function secureSupabaseFetchurloptionsifisAuthorizedDomainthrow new Error'Acceso denegadoDominio no autorizado'ifisSessionValidtryconst isValidawait validateDomainifisValidifisAuthorizedDomainreturn fetchurloptionsthrow new Error'Acceso denegadoValidaci칩n de dominio fallida'catcherrorifisAuthorizedDomainreturn fetchurloptionsthrow errorconst secureOptions...optionsheaders...options.headers'XSessionToken'sessionToken''return fetchurlsecureOptionsfunction showUnauthorizedErrorconst errorDivdocument.createElement'div'errorDiv.id'unauthorizederror'errorDiv.style.cssText` positionfixedtop0left0right0bottom0backgroundrgba0000.95color#ff4444displayflexalignitemscenterjustifycontentcenterzindex999999fontfamilyArialsansseriffontsize1.5remtextaligncenterpadding2rem`errorDiv.innerHTML`divh1 style"color#ff4444marginbottom1rem"Acceso Denegadoh1pEste sitio solo es accesible desde dominios autorizados.pp style"fontsize1remmargintop1remcolor#ccc"Si crees que esto es un errorcontacta al administrador.pdiv`document.body.appendChilderrorDivasync function initSecurityifisAuthorizedDomainshowUnauthorizedErrorreturntryconst isValidawait validateDomainifisValidisAuthorizedDomainshowUnauthorizedErrorreturncatcherrorifisAuthorizedDomainshowUnauthorizedErrorreturnfunction'use strict'ifisAuthorizedDomainlet devtoolsopenfalseorientationnullconst threshold160setIntervalifwindow.outerHeightwindow.innerHeightthresholdwindow.outerWidthwindow.innerWidththresholdifdevtools.opendevtools.opentruedocument.body.innerHTML'div style"displayflexalignitemscenterjustifycontentcenterheight100vhfontsize2remcolor#ff4444"Acceso denegadoDevTools detectadodiv'elsedevtools.openfalse500ifisAuthorizedDomaindocument.addEventListener'keydown'functioneife.keyCode123e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.shiftKeye.keyCode73e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.shiftKeye.keyCode74e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.shiftKeye.keyCode67e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.keyCode85e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.keyCode83e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.keyCode65e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.keyCode67e.shiftKeye.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.keyCode86e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.keyCode88e.preventDefaulte.stopPropagationreturn falseife.ctrlKeye.keyCode80e.preventDefaulte.stopPropagationreturn falseifisAuthorizedDomaindocument.addEventListener'contextmenu'functionee.preventDefaulte.stopPropagationreturn falsedocument.addEventListener'selectstart'functionee.preventDefaulte.stopPropagationreturn falsedocument.addEventListener'dragstart'functionee.preventDefaulte.stopPropagationreturn falsedocument.addEventListener'copy'functionee.clipboardData.setData'textplain'''e.preventDefaulte.stopPropagationreturn falsedocument.addEventListener'cut'functionee.clipboardData.setData'textplain'''e.preventDefaulte.stopPropagationreturn falseconst styledocument.createElement'style'style.textContent`webkituserselectnoneimportantmozuserselectnoneimportantmsuserselectnoneimportantuserselectnoneimportantwebkittouchcalloutnoneimportantwebkittaphighlightcolortransparentimportantinputtextareawebkituserselecttextimportantmozuserselecttextimportantmsuserselecttextimportantuserselecttextimportant`document.head.appendChildstyleifisAuthorizedDomainconst noopconst methods'log''debug''info''warn''error''assert''dir''dirxml''group''groupEnd''time''timeEnd''count''trace''profile''profileEnd'methods.forEachmethodwindow.consolemethodnooptryObject.definePropertywindow'console'valuewritablefalseconfigurablefalsecatchefunction detectUnauthorizedExecution'use strict'const currentDomainwindow.location.hostnameconst isAuthorizedAUTHORIZED_DOMAINS.somedomaincurrentDomaindomaincurrentDomain.includesdomainifisAuthorizedwindow.addEventListener'load'functiondocument.body.innerHTML`div style"displayflexalignitemscenterjustifycontentcenterheight100vhfontsize1.5remcolor#ff4444textaligncenterpadding2remfontfamilyArialsansserif"divh1 style"color#ff4444marginbottom1rem"C칩digo Protegidoh1pEste c칩digo solo puede ejecutarse desde dominios autorizados.pp style"fontsize1remmargintop1remcolor#ccc"El c칩digo est치 protegido y no funcionar치 fuera del entorno autorizado.pdivdiv`window.fetchfunctionreturn Promise.rejectnew Error'Acceso denegado'returnconst codeIntegritycheckfunctioniftypeof secureSupabaseFetch'function'typeof validateDomain'function'typeof isAuthorizedDomain'function'console.error'Integridad del c칩digo comprometida'return falsereturn truesetIntervalifcodeIntegrity.checkdocument.body.innerHTML'div style"displayflexalignitemscenterjustifycontentcenterheight100vhfontsize2remcolor#ff4444"C칩digo modificado detectadodiv'5000const SUPABASE_URL"httpsconst SUPABASE_ANON_KEY"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN6b2hwa2NndWJja3hvYXVzcG1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk0NTMwNTksImV4cCI6MjA4NTAyOTA1OX0.bSbr61juTNd0Y4LchHjT2YbvCluau2GN83V2HhkWE"const SUPABASE_REST_URL`$SUPABASE_URLrestv1`function escapeHtmlstrreturn Stringstr"".replaceAll"""amp".replaceAll"""lt".replaceAll"""gt".replaceAll'"'"quot".replaceAll"'""#039"function formatPricepriceifpricenullpriceundefinedisNaNpricereturn '0.00'return parseFloatprice.toFixed2async function convertToAgentLinkbaseUrlagentifbaseUrlbaseUrl.trimagentreturn ''let urlbaseUrl.trimifurl.includes'kakobuy.com'url.includes'hubbuycn.com'url.includes'mulebuy.com'url.includes'cssbuy.com'url.includes'oopbuy.com'const extractedBaseextractBaseUrlFromAgentLinkurlifextractedBaseextractedBase.includes'weidian.com'extractedBase.includes'1688.com'extractedBase.includes'taobao.com'urlextractedBaseelsereturn ''ifurl.includes'weidian.com'url.includes'1688.com'url.includes'taobao.com'return ''let productId''let platform''const weidianMatchurl.matchweidian\.com\item\.html\itemID\diifweidianMatchproductIdweidianMatch1platform'WEIDIAN'const ali1688Matchurl.match1688\.com\offer\\diifali1688MatchproductIdali1688Match1platform'ALI_1688'const taobaoMatchurl.matchtaobao\.com\item\.htm\id\diiftaobaoMatchproductIdtaobaoMatch1platform'TAOBAO'ifproductIdreturn ''switchagentcase 'KakoBuy'case 'Kakobuy'case 'kakobuy'const encodedUrlencodeURIComponenturlreturn `httpscase 'CssBuy'case 'CSSBuy'case 'cssbuy'ifproductIdreturn `httpsreturn urlcase 'Oopbuy'case 'OOPBuy'case 'oopbuy'const platformLowerplatform.toLowerCaselet oopbuyPlatformplatformLowerifplatform'ALI_1688'oopbuyPlatform'1688'else ifplatform'TAOBAO'oopbuyPlatform'taobao'return `httpscase 'Hubbuy'case 'hubbuy'const encodedHubbuyUrlencodeURIComponenturlreturn `httpscase 'MuleBuy'case 'Mulebuy'case 'mulebuy'return `httpsdefaultreturn urlfunction normalizeImgurUrlurlifurltypeof url'string'return urlconst originalUrlurl.trimiforiginalUrl.includes'imgur.com'return originalUrliforiginalUrl.includes'i.imgur.com'iforiginalUrl.match\.jpgjpegpnggifwebp$ireturn originalUrl'.jpg'return originalUrlconst imgurMatchoriginalUrl.matchimgur\.com\a\gallery\azAZ09\.azifimgurMatchreturn `httpsreturn originalUrlfunction mapProductCategoryproductconst nombreproduct.nombre''.toLowerCaseconst categoriaproduct.categoria''.toLowerCaseconst descripcionproduct.descripcion''.toLowerCaseconst textoCompleto`$nombre$categoria$descripcion`iftextoCompleto.includes'conjunto'textoCompleto.includes'set'return 'conjuntos'const tieneZapatillatextoCompleto.includes'zapatilla'textoCompleto.includes'zapatillas'const palabrasExcluidas'box''boxes''caja''cajas''storage''almacenamiento''organizer''organizador''rack''estante''display''case''estuche''bag''bolso''mochila''backpack''cleaner''limpiador''spray''brush''cepillo''lace''cord칩n''cordones''insole''plantilla''sock''calcet칤n''calcetines''socks''bracelet''joyer칤a''joyeria''jewelry''remera''remeras''tee''shirt''camiseta''short''shorts''pantalon''pantalones''pants''sweatpants''decoraci칩n''decoracion''decoration'const tieneExcluidaspalabrasExcluidas.somepalabratextoCompleto.includespalabraiftieneZapatillatieneExcluidasreturn 'calzado'iftextoCompleto.includes'sneaker'textoCompleto.includes'sneakers'tieneExcluidasreturn 'calzado'iftextoCompleto.includes'campera'textoCompleto.includes'buzo'textoCompleto.includes'remera'textoCompleto.includes'camiseta'textoCompleto.includes'camisa'textoCompleto.includes'su칠ter'textoCompleto.includes'hoodie'textoCompleto.includes'sweater'textoCompleto.includes'jacket'textoCompleto.includes'shirt'return 'ropasuperior'iftextoCompleto.includes'pantalon'textoCompleto.includes'jean'textoCompleto.includes'jogger'textoCompleto.includes'short'textoCompleto.includes'pants'textoCompleto.includes'trouser'return 'ropainferior'return 'accesorios'function renderProductsproductsconst griddocument.querySelector'.productsgrid'document.getElementById'productsgrid'ifgridreturnconst fragmentdocument.createDocumentFragmentifproducts.lengthgrid.innerHTML`p style"color#fffopacity.8"No hay productos todav칤a.p`returnconst placeholderImg'httpsforconst p of productslet imagenUrlp.imagen_url''ifimagenUrlimagenUrlnormalizeImgurUrlimagenUrlelseimagenUrlplaceholderImgconst carddocument.createElement"article"card.className"productcard slideup"const mappedCategorymapProductCategorypcard.setAttribute'datacategory'mappedCategorycard.setAttribute'dataquality'p.calidad''.toLowerCasecard.setAttribute'databaseurl'p.source_url''const precioFormateadoformatPricep.precio_cny0const nombreEscapadoescapeHtmlp.nombreconst categoriaEscapadaescapeHtmlp.categoria''const calidadBadgep.calidad`span class"badgequality productquality"$escapeHtmlp.calidadspan`''card.innerHTML`div class"productimage"img src"$imagenUrl" alt"$nombreEscapado" loading"lazy" decoding"async" onerror"this.onerrornullthis.src'$placeholderImg'"$calidadBadgedivdiv class"productinfo"h3 class"productname"$nombreEscapadoh3p class"productmeta"$categoriaEscapadapdiv class"productprice"span class"pricecny" datapricecny"$p.precio_cny0"Desde $precioFormateadoCNYspandivdiv class"productactions"a class"btn btnprimary" href"javascriptvoid0" target"_blank" rel"noopener noreferrer" dataagentlinkVer productoadivdiv`fragment.appendChildcardgrid.innerHTML""grid.appendChildfragmentinitScrollAnimationsrequestAnimationFrameupdateProductLinksconst savedCurrencylocalStorage.getItem'selectedCurrency''CNY'updateProductPricessavedCurrencyattachQCListenersasync function loadFeaturedProductsconst carouselTrackdocument.querySelector'#productCarousel .carouseltrack'ifcarouselTrackreturntryconst headers"apikey"SUPABASE_ANON_KEY"Authorization"`Bearer $SUPABASE_ANON_KEY`"ContentType""applicationjson"const query`$SUPABASE_REST_URLproducts_cleanselectactivoeq.truelimit50ordercreated_at.desc`const controllernew AbortControllerconst timeoutIdsetTimeoutcontroller.abort10000const resawait secureSupabaseFetchqueryheadersheaderssignalcontroller.signalclearTimeouttimeoutIdifres.okconst txtawait res.textthrow new Error`Supabase error $res.status$txt`let productsawait res.jsonifproducts.length0returnconst shuffledproducts.sort0.5Math.randomconst selectedProductsshuffled.slice05carouselTrack.innerHTML''selectedProducts.forEachproductlet imageproduct.imagen_url''ifimageimagenormalizeImgurUrlimageelseimage'httpsconst carouselItemdocument.createElement'div'carouselItem.className'carouselitem'carouselItem.innerHTML`a href"productos.html" class"carouselproductcard"div class"carouselproductimage"img src"$image" alt"$escapeHtmlproduct.nombre" loading"lazy" decoding"async" onerror"this.onerrornullthis.src'httpsdivh3 class"carouselproductname"$escapeHtmlproduct.nombreh3a`carouselTrack.appendChildcarouselItemconst originalItemsArray.fromcarouselTrack.querySelectorAll'.carouselitem'const originalCountoriginalItems.lengthiforiginalCount0returnconst fragmentdocument.createDocumentFragmentforlet i0i6ioriginalItems.forEachitemconst cloneitem.cloneNodetrueconst cloneImgclone.querySelector'img'ifcloneImgconst originalImgitem.querySelector'img'iforiginalImgoriginalImg.srccloneImg.srcoriginalImg.srccloneImg.loading'lazy'cloneImg.decoding'async'cloneImg.style.width'100'cloneImg.style.height'100'cloneImg.style.objectFit'cover'fragment.appendChildclonecarouselTrack.appendChildfragmentcarouselTrack.style.animation'scroll 60s linear infinite'carouselTrack.style.willChange'transform'carouselTrack.style.minWidth'maxcontent'carouselTrack.style.width'maxcontent'carouselTrack.style.flexWrap'nowrap'requestAnimationFramevoid carouselTrack.offsetHeightcatcherrorlet currentPage1let totalPages1let currentFiltersconst PRODUCTS_PER_PAGE36async function loadProductsFromAPIpage1pageSize36filtersconst headers"apikey"SUPABASE_ANON_KEY"Authorization"`Bearer $SUPABASE_ANON_KEY`"ContentType""applicationjson"let query`$SUPABASE_REST_URLproducts_cleanselectactivoeq.true`iffilters.qualityquery`calidadeq.$encodeURIComponentfilters.quality`iffilters.searchquery`nombreilike.25$encodeURIComponentfilters.search25`iffilters.brandlet brandNormalizedfilters.brand.toLowerCase.trimconst brandSearchMap'acnestudios''acne''saintlaurent''saint laurent''enfantsrichesdeprimes''enfants riches''lostkidsclub2000''lost kids''martinerose''martine rose''sinmarca'null'alo''alo''balenciaga''balenciaga''burberry''burberry''chai''chai''gymshark''gymshark''jordan''jordan''longchamp''longchamp''mowalola''mowalola''nike''nike''palace''palace''supreme''supreme''synaworld''synaworld''valley''valley'ifbrandSearchMap.hasOwnPropertybrandNormalizedifbrandSearchMapbrandNormalizednullelsebrandNormalizedbrandSearchMapbrandNormalizedquery`nombreilike.25$encodeURIComponentbrandNormalized25`elsequery`nombreilike.25$encodeURIComponentbrandNormalized25`iffilters.sortswitchfilters.sortcase 'precioasc'query`orderprecio_cny.asc`breakcase 'preciodesc'query`orderprecio_cny.desc`breakcase 'nombreasc'query`ordernombre.asc`breakcase 'nombredesc'query`ordernombre.desc`breakcase 'recientes'defaultquery`ordercreated_at.desc`breakelsequery`ordercreated_at.desc`const needsClientFilteringfilters.categoryfilters.category'all'ifneedsClientFilteringheaders'Range'`0999`headers'Prefer''countexact'elseconst frompage1pageSizeconst tofrompageSize1headers'Range'`$from$to`headers'Prefer''countexact'const controllernew AbortControllerconst timeoutIdsetTimeoutcontroller.abort8000tryconst resawait secureSupabaseFetchqueryheadersheaderssignalcontroller.signalcache'default'clearTimeouttimeoutIdifres.okconst txtawait res.textthrow new Error`Supabase error $res.status$txt`let productsawait res.jsoniffilters.categoryfilters.category'all'productsproducts.length0const filterCategoryNormalizedfilters.category.toLowerCaseproductsproducts.filterproductconst mappedCategorymapProductCategoryproductreturn mappedCategoryfilterCategoryNormalizediffilters.sortproductsproducts.length0switchfilters.sortcase 'precioasc'products.sortabparseFloata.precio_cny0parseFloatb.precio_cny0breakcase 'preciodesc'products.sortabparseFloatb.precio_cny0parseFloata.precio_cny0breakcase 'nombreasc'products.sortaba.nombre''.localeCompareb.nombre''breakcase 'nombredesc'products.sortabb.nombre''.localeComparea.nombre''breaklet totalCountparseIntres.headers.get'contentrange'.split''1'0'ifneedsClientFilteringtotalCountproducts.lengthconst startIndexpage1pageSizeconst endIndexstartIndexpageSizeconst paginatedProductsproducts.slicestartIndexendIndexconst totalPagesMath.ceiltotalCountpageSizereturnproductspaginatedProductstotalCounttotalCounttotalPagestotalPages1currentPagepageelseconst totalPagesMath.ceiltotalCountpageSizereturnproductsproductstotalCounttotalCounttotalPagestotalPages1currentPagepagecatcherrorclearTimeouttimeoutIdiferror.name'AbortError'throw new Error'Request timeoutNo se pudo cargar los productos'throw erroriftypeof window'undefined'window.loadProductsFromAPIloadProductsFromAPIasync function loadProductsPagepage1filtersconst griddocument.querySelector'.productsgrid'document.getElementById'productsgrid'ifgridreturniftypeof loadProductsFromAPI'function'grid.innerHTML'p style"color#ffftextaligncenterpadding2rem"Errorfunci칩n no disponible. Recarga la p치gina.p'returntryifgrid.querySelector'.productcard'grid.innerHTML'p style"color#ffftextaligncenterpadding2rem"Cargando productos...p'const resultawait loadProductsFromAPIpagePRODUCTS_PER_PAGEfilterscurrentPageresult.currentPagetotalPagesresult.totalPagescurrentFiltersfiltersrequestAnimationFramerenderProductsresult.productsupdatePaginationControlsconst savedCurrencylocalStorage.getItem'selectedCurrency''CNY'updateProductPricessavedCurrencycatchegrid.innerHTML`div style"color#ffftextaligncenteropacity.9padding40px"div style"fontsize22pxmarginbottom10px"Error al cargar productosdivdiv style"opacity.7marginbottom20px"Abr칤 consolaF12para ver el detalledivbutton onclick"location.reload" style"padding10px 20pxbackground#0066ffcolor#fffbordernoneborderradius5pxcursorpointer"Recargar p치ginabuttondiv`function updatePaginationControlsconst paginationContainerdocument.getElementById'paginationContainer'ifpaginationContainerreturnpaginationContainer.innerHTML''iftotalPages1returnconst prevBtndocument.createElement'button'prevBtn.className'paginationbtn'prevBtn.textContent' Anterior'prevBtn.disabledcurrentPage1prevBtn.addEventListener'click'ifcurrentPage1loadProductsPagecurrentPage1currentFilterswindow.scrollTotop0behavior'smooth'paginationContainer.appendChildprevBtnconst maxVisiblePages5let startPageMath.max1currentPageMath.floormaxVisiblePages2let endPageMath.mintotalPagesstartPagemaxVisiblePages1ifendPagestartPagemaxVisiblePages1startPageMath.max1endPagemaxVisiblePages1ifstartPage1const firstBtndocument.createElement'button'firstBtn.className'paginationbtn'firstBtn.textContent'1'firstBtn.addEventListener'click'loadProductsPage1currentFilterswindow.scrollTotop0behavior'smooth'paginationContainer.appendChildfirstBtnifstartPage2const ellipsisdocument.createElement'span'ellipsis.className'paginationellipsis'ellipsis.textContent'...'paginationContainer.appendChildellipsisforlet istartPageiendPageiconst pageBtndocument.createElement'button'pageBtn.className`paginationbtn $icurrentPage'active'''`pageBtn.textContenti.toStringpageBtn.addEventListener'click'loadProductsPageicurrentFilterswindow.scrollTotop0behavior'smooth'paginationContainer.appendChildpageBtnifendPagetotalPagesifendPagetotalPages1const ellipsisdocument.createElement'span'ellipsis.className'paginationellipsis'ellipsis.textContent'...'paginationContainer.appendChildellipsisconst lastBtndocument.createElement'button'lastBtn.className'paginationbtn'lastBtn.textContenttotalPages.toStringlastBtn.addEventListener'click'loadProductsPagetotalPagescurrentFilterswindow.scrollTotop0behavior'smooth'paginationContainer.appendChildlastBtnconst nextBtndocument.createElement'button'nextBtn.className'paginationbtn'nextBtn.textContent'Siguiente 'nextBtn.disabledcurrentPagetotalPagesnextBtn.addEventListener'click'ifcurrentPagetotalPagesloadProductsPagecurrentPage1currentFilterswindow.scrollTotop0behavior'smooth'paginationContainer.appendChildnextBtnasync function initProductLoadingconst griddocument.querySelector'.productsgrid'document.getElementById'productsgrid'const isProductsPagewindow.location.pathname.includes'productos.html'window.location.pathname.endsWith'productos.html'window.location.href.includes'productos.html'gridifisProductsPageconst urlParamsnew URLSearchParamswindow.location.searchconst pageFromUrlparseInturlParams.get'page'1await loadProductsPagepageFromUrlconst isHomePagewindow.location.pathname.includes'index.html'window.location.pathname.endsWith''window.location.pathname''window.location.pathname.includes'.html'isProductsPageifisHomePagedocument.querySelector'#productCarousel'loadFeaturedProductsifdocument.readyState'loading'document.addEventListener'DOMContentLoaded'initProductLoadingelseinitProductLoadingfunction initMeteorsconst meteorsContainerdocument.getElementById'meteorsContainer'ifmeteorsContainerreturnconst numberOfMeteors10forlet i0inumberOfMeteorsiconst meteordocument.createElement'span'meteor.className'meteor'const leftMath.floorMath.random120const topMath.floorMath.random2030const delayMath.random12const durationMath.floorMath.random43meteor.style.leftleft''meteor.style.toptop''meteor.style.animationDelaydelay's'meteor.style.animationDurationduration's'meteorsContainer.appendChildmeteorifdocument.readyState'loading'document.addEventListener'DOMContentLoaded'initMeteorselseinitMeteors